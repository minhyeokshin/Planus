<!-- Thymeleaf template for Submenu Page -->
<!-- (ì„œë¸Œë©”ë‰´ í˜ì´ì§€ìš© íƒ€ì„ë¦¬í”„ í…œí”Œë¦¿) -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/common/layouts/defaultLayout}">
  <!-- Inherit layout from default admin layout -->
  <!-- (ê¸°ë³¸ ê´€ë¦¬ì ë ˆì´ì•„ì›ƒ ìƒì†) -->
<head>
<style>
  table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.05);
    background-color: #fff;
    border-radius: 8px;
    overflow: hidden;
    margin-top: 1em;
  }

  th {
    background-color: #f0f4f8;
    color: #333;
    font-weight: 600;
    text-align: left;
    padding: 1em;
    border-bottom: 1px solid #ddd;
  }

  td {
    padding: 1em;
    border-bottom: 1px solid #eee;
    color: #444;
  }

  tr:hover {
    background-color: #f9fbfc;
  }

  a {
    color: #007bff;
    font-weight: 500;
  }

  a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>

<div layout:fragment="content">
    <!-- Main content area to be injected into layout -->
    <!-- (ë ˆì´ì•„ì›ƒì— ì‚½ì…ë  ì£¼ìš” ì½˜í…ì¸  ì˜ì—­) -->
    <div>
      <h2>ğŸ“¦ ìµœê·¼ Pull Request ëª©ë¡</h2>
      <table>
        <thead>
          <tr>
            <th>ì œëª©</th>
            <th>ì‘ì„±ì</th>
            <th>ë‚ ì§œ</th>
            <th>ìƒíƒœ</th>
            <th>ë§í¬</th>
          </tr>
        </thead>
        <tbody id="pr-body"></tbody>
      </table>

      <script>
        fetch("https://api.github.com/repos/Buildify-SSG/Buildify_Phase-2/pulls?state=all")
          .then(res => res.json())
          .then(data => {
            const tbody = document.getElementById("pr-body");
            data.slice(0, 10).forEach(pr => {
              const tr = document.createElement("tr");
              tr.innerHTML = `
                <td>${pr.title}</td>
                <td>${pr.user.login}</td>
                <td>${new Date(pr.created_at).toLocaleString()}</td>
                <td>${pr.state === 'open' ? 'ğŸŸ¢ ì˜¤í”ˆ' : (pr.merged_at ? 'ğŸŸ£ ë¨¸ì§€ë¨' : 'ğŸ”´ í´ë¡œì¦ˆ')}</td>
                <td><a href="${pr.html_url}" target="_blank">ğŸ”— ì´ë™</a></td>
              `;
              tbody.appendChild(tr);
            });
          });
      </script>
    </div>
</div>


</body>
</html>